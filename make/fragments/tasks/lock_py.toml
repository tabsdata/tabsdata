#
# Copyright 2025 Tabs Data Inc.
#

[tasks.lock_py]
category = "02 - Tidy"
description = "Task 'lock' for Python projects"
run_task = [
    { name = [
        "lock_py_ta_features",
        "lock_py_ta_tableframe",
        "lock_py_te_examples",
        "lock_py_te_tableframe",
        "lock_py_tabsdata",
        "lock_py_tabsdata_databricks",
        "lock_py_tabsdata_mongodb",
        "lock_py_tabsdata_salesforce",
        "lock_py_tabsdata_snowflake",
    ] }
]

[tasks.lock_py_ta_features]
category = "02 - Tidy"
private = true

[tasks.lock_py_ta_tableframe]
category = "02 - Tidy"
private = true

[tasks.lock_py_te_examples]
category = "02 - Tidy"
private = true

[tasks.lock_py_te_tableframe]
category = "02 - Tidy"
private = true

[tasks.lock_py_tabsdata]
category = "02 - Tidy"
private = true
cwd = "${PROJECT_TABSDATA_ROOT_FOLDER}"
script_runner = "@duckscript"
script = [
    '''
    !include_files ./make/libraries/log.ds

    cd "${PROJECT_TABSDATA_ROOT_FOLDER}"
    info "ðŸš€ python ${LOCK_REQUIREMENTS_PY} ${PROJECT_TABSDATA_ROOT_FOLDER}"
    exec --fail-on-error python ${LOCK_REQUIREMENTS_PY} ${PROJECT_TABSDATA_ROOT_FOLDER}
    ''']

[tasks.lock_py_tabsdata_databricks]
category = "02 - Tidy"
private = true

[tasks.lock_py_tabsdata_mongodb]
category = "02 - Tidy"
private = true

[tasks.lock_py_tabsdata_salesforce]
category = "02 - Tidy"
private = true

[tasks.lock_py_tabsdata_snowflake]
category = "02 - Tidy"
private = true